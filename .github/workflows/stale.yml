# =============================================================================
# STALE BOT CONFIGURATION
# =============================================================================
#
# Automatically marks issues and PRs as stale after a period of inactivity,
# and eventually closes them if there's no further activity.
#
# =============================================================================

name: Stale Issue Management

on:
  schedule:
    # Run daily at midnight UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          # Issue settings
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had recent activity. 
            It will be closed in 14 days if no further activity occurs.
            
            If this issue is still relevant:
            - Add a comment with an update
            - Remove the `stale` label
            
            Thank you for your contributions!
          
          close-issue-message: |
            This issue has been automatically closed due to inactivity.
            Feel free to reopen if it's still relevant.
          
          stale-issue-label: 'stale'
          days-before-issue-stale: 60
          days-before-issue-close: 14
          
          # PR settings (longer grace period)
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had recent activity.
            It will be closed in 21 days if no further activity occurs.
            
            If this PR is still relevant:
            - Rebase on main if needed
            - Add a comment with an update
            - Remove the `stale` label
          
          close-pr-message: |
            This pull request has been automatically closed due to inactivity.
            Feel free to reopen when you're ready to continue.
          
          stale-pr-label: 'stale'
          days-before-pr-stale: 45
          days-before-pr-close: 21
          
          # Exempt labels - these issues/PRs won't be marked stale
          exempt-issue-labels: 'pinned,security,roadmap,blocked,in-progress'
          exempt-pr-labels: 'pinned,security,blocked,in-progress'
          
          # Don't stale recently updated items
          exempt-all-milestones: true
          
          # Rate limiting
          operations-per-run: 30
